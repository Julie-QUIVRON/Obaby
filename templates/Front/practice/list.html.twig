{% extends 'base.html.twig' %}

{% block stylesheets %}

    <link rel="stylesheet" href="{{ asset('css/practice.css') }}"/>

{% endblock %}
{% block body %}

  <button class="d-none d-md-block" id="ask-submit-btn" onclick="window.location.href= '{{ path('practice_submit')}}'" type="button">Proposer une bonne pratique</button>
 <!-- Main Content Start -->
  <h1 class="text-center">Bonnes Pratiques</h1>
  
  <aside class="mb-3 position-relative">  

          <div class="dropdown text-center">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Cat√©gories
            </a>
          
            <ul class="dropdown-menu text-center position-absolute" id="category-nav">
            {% for category in categories %}
              <li>
                <a class=
                  "dropdown-item text-light
                  {% if category.slug == practices[0].category.slug %}
                    active
                  {% endif %}"
                  href="{{ path('practice_list', {slug: category.slug}) }}">{{ category.name }}
                </a>
              </li>
            {% endfor %}
            </ul>
          </div>

  </aside>
        <main class="container-fluid row m-auto">

    <content class="text-center d-flex flex-column align-items-center">


{% for practice in practices %}
    <article class="col-lg-10 mb-5 practice-article">
      <form class="m-0" action="{{ path('favorite_add') }}" method='post'>
        <input type="hidden" name="id_favorite" value="{{ practice.id }}"/>
        <button class="favorite-practice"><i class="fa-solid fa-heart-circle-plus fa-3x favorite-icon"></i></button>
      </form>
      <div class="card banner-owner" role="card-banner">
        <img src="{{ asset('asset/img/finger.png') }}" role="banner" class="card-img-top " alt="finger picture">
        <img src="{{ asset('asset/img/nipple' ~ practice.category.slug ~ '.png') }}" class="card-img-top banner-feature" alt="nipple picture">
        <div class="card-body">
          <h5 class="card-title text-center">{{ practice.title }}</h5>
          <p class="card-text">{{ practice.content|u.truncate(200, '...') }} </p>
        </div>
        <div class="card-footer p-0">
          <div class="d-flex justify-content-between justify-content-lg-around">
            <div class="col-4 ">
              <img class="autor-pic m-0"  src="{{ asset( 'asset/img/avatar1.svg' ) }}" alt="author picture">
              <p class="autor-name text-muted align-self-end mb-0">{{ practice.user.pseudo }}</p>
            </div>
            <div class="d-flex align-items-center col-4">
              <a href={{ path('practice_show', {slug: practice.slug}) }} class="btn rounded-pill m-auto">Lire la bonne pratique</a>
            </div>
            <div class="align-self-center col-4">
              <time datetime="{{ practice.createdAt|date ("d/m/Y") }}">{{ practice.createdAt|date ("d/m/Y") }}</time>
            </div>
          </div>
        </div>
      </div>
    </article>
{% endfor %}


    </content>
  </main>
  {% endblock %}
